{"version":3,"file":"animation_summary.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/animation/animation_summary.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AnimationEntryAst, AnimationQueryAst, AnimationAstVisitor, AnimationStateDeclarationAst,\n  AnimationStateTransitionAst, AnimationStepAst, AnimationSequenceAst, AnimationGroupAst, AnimationKeyframeAst,\n  AnimationStylesAst\n} from \"./animation_ast\";\n\nexport class AnimationSummary {\n  constructor(public entries: AnimationEntrySummary[]) {}\n\n  findEntry(name: string): AnimationEntryAst {\n    var result = this.entries.find(entry => {\n      return entry.ast.name == name;\n    });\n    return result ? result.ast : null;\n  }\n\n  get queries(): AnimationQueryAst[] {\n    var flatQueries: AnimationQueryAst[] = [];\n    this.entries.forEach(entry => {\n      flatQueries.push(...entry.queries);\n    });\n    return flatQueries;\n  }\n\n  get triggers(): AnimationEntryAst[] {\n    return this.entries.map(entry => entry.ast);\n  }\n}\n\nexport class AnimationEntrySummary {\n  constructor(public ast: AnimationEntryAst, public queries: AnimationQueryAst[]) {}\n}\n\nexport function generateAnimationSummary(asts: AnimationEntryAst[]): AnimationSummary {\n  var visitor = new AnimationSummaryVisitor();\n  return visitor.build(asts);\n}\n\nclass AnimationSummaryVisitor implements AnimationAstVisitor {\n  build(asts: AnimationEntryAst[]): AnimationSummary {\n    var summary = new AnimationSummary([]);\n    asts.forEach(ast => ast.visit(this, summary));\n    return summary;\n  }\n\n  visitAnimationEntry(ast: AnimationEntryAst, summary: AnimationSummary): any {\n    var triggerSummary = new AnimationEntrySummary(ast, []);\n    summary.entries.push(triggerSummary);\n    ast.stateDeclarations.forEach(innerAst => innerAst.visit(this, triggerSummary));\n    ast.stateTransitions.forEach(innerAst => innerAst.visit(this, triggerSummary));\n  }\n\n  visitAnimationStateTransition(ast: AnimationStateTransitionAst, summary: AnimationEntrySummary): any {\n    ast.animation.visit(this, summary);\n  }\n\n  visitAnimationSequence(ast: AnimationSequenceAst, summary: AnimationEntrySummary): any {\n    ast.steps.forEach(innerAst => innerAst.visit(this, summary));\n  }\n\n  visitAnimationGroup(ast: AnimationGroupAst, summary: AnimationEntrySummary): any {\n    ast.steps.forEach(innerAst => innerAst.visit(this, summary));\n  }\n\n  visitAnimationStateDeclaration(ast: AnimationStateDeclarationAst, summary: AnimationEntrySummary): any {}\n  visitAnimationKeyframe(ast: AnimationKeyframeAst, summary: AnimationEntrySummary): any {}\n  visitAnimationStyles(ast: AnimationStylesAst, summary: AnimationEntrySummary): any {}\n  visitAnimationStep(ast: AnimationStepAst, summary: AnimationEntrySummary): any {}\n\n  visitAnimationQuery(ast: AnimationQueryAst, summary: AnimationEntrySummary): any {\n    summary.queries.push(ast);\n    ast.animation.visit(this, summary);\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}